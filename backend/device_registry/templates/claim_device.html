{% extends "admin_base.html" %}

{% block title %}WoTT - Claim Device{% endblock title %}

{% block dashboard_title %}
  <h1 style="margin-bottom: 0">Claim Device</h1>
{% endblock dashboard_title %}

{% block admin_content %}
  <!-- claim_device.html -->
    {% if alert_style %}
    <div class="alert alert-{{ alert_style }} p-2" style="color: black" role="alert">
      <style>
        .claim-link {
          color: white;
        }
      </style>
      {{ alert_text|safe }}
    </div>
    {% endif %}

    <div class="row h-100">
      <div class="col-sm-10 col-md-8 col-lg-6 mx-auto d-table h-100">
        <div class="align-middle">
          <div class="text-center mt-4">
            <h1 class="h2">Claim Device</h1>
            <p class="lead">Enter details below to claim a device</p>
          </div>
          <div class="card">
            <div class="card-body">
              <div class="m-sm-4">
                <form method="POST" action="">
                  {% csrf_token %}
                  <div class="form-group">
                    <label for="device_id">Device ID</label>
                    <input class="form-control form-control-lg" type="text" name="device_id"
                           placeholder="Device ID" id="device_id" value= "{{ form.device_id.value | default_if_none:'' }}" />
                    {% if form.device_id.errors %}
                      {% for error in form.device_id.errors %}
                        <label class="error form-text invalid-feedback small"
                               style="display: block">{{ error | escape }}</label>
                      {% endfor %}
                    {% endif %}
                  </div>
                  <div class="form-group">
                    <label>Claim Token</label>
                    <input class="form-control form-control-lg" type="text" name="claim_token"
                           placeholder="Claim Token" value= "{{ form.claim_token.value | default_if_none:'' }}"/>
                    {% if form.claim_token.errors %}
                      {% for error in form.claim_token.errors %}
                        <label class="error form-text invalid-feedback small"
                               style="display: block">{{ error | escape }}</label>
                      {% endfor %}
                    {% endif %}
                  </div>
                  <div class="form-group">
                    <div class="text-center mt-3">
                      <input type="submit" class="btn btn-lg btn-primary" id="claim-button" value="Claim Device"/>
                    </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
{% endblock admin_content %}

{% block scripts %}
{{ block.super }}
{% if MIXPANEL_TOKEN %}
  <script type="text/javascript">
  $("#claim-button").click(() => mixpanel.track("Claim Device"));
  </script>
{% endif %}
{% endblock scripts %}