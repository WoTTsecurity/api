{% extends "admin_base.html" %}

{% block title %}WoTT - Credentials{% endblock title %}

{% block dashboard_title %}
  <h1>Credentials</h1>
{% endblock dashboard_title %}

{% block admin_content %}

  <div class="modal show fade" tabindex="-1" role="dialog" id="mymodal">
    <div class="modal-dialog modal-xl" role="document">
      <form class="modal-content" method="post">
        {% csrf_token %}
        <div class="modal-header">
          <h2 class="modal-title">Add New Credential</h2>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            <div class="form-row">
              <div class="form-group col-md-4">
{#                <label for="inputName">Name</label>#}
                <input type="text" class="form-control" id="inputName" placeholder="Name" name="name">
              </div>
              <div class="form-group col-md-4">
{#                <label for="inputKey">Key</label>#}
                <input type="text" class="form-control" id="inputKey" placeholder="Key" name="key">
              </div>
              <div class="form-group col-md-4">
{#                <label for="inputValue">Value</label>#}
                <input type="text" class="form-control" id="inputValue" placeholder="Value" name="value">
              </div>
            </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
          <button type="submit" class="btn btn-primary">Submit</button>
        </div>
      </form>
    </div>
  </div>

  <div class="row">
      <div class="col-12">
        <div class="card">
          <div class="card-header">
            <h5 class="card-title">Credentials</h5>
            <h6 class="card-subtitle text-muted">View credentials.</h6>
          </div>
          <div class="card-body">
            <table id="datatables-basic" class="table table-striped table-responsive-xs" style="width:100%">
              <thead>
              <tr>
                <th>Name</th>
                <th>Key</th>
                <th>Value</th>
                <th></th>
              </tr>
              </thead>
              <tbody>
              {% for cred in object_list %}
              <tr class="wott-cred-row">
                <td>{{ cred.name }}</td>
                <td>{{  cred.key }}</td>
                <td>{{  cred.value }}</td>
                <td class="wott-cred-btns"></td>
              </tr>
              {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
  </div>
{#  <div class="row">#}
  <button type="button" class="btn btn-success" onclick="showDialog()">ï¼‹ Add Credential</button>
{#  </div>#}

{% endblock admin_content %}

{% block scripts %}
  <style>
  .btn {
    color: white;
  }
  .wott-cred-row {

  }
  td.wott-cred-btns .btn {
    visibility: hidden;
  }
  .wott-cred-row:hover td.wott-cred-btns .btn {
    visibility: visible;
  }
  </style>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // Datatables basic
      $('#datatables-basic').DataTable({
        responsive: true,
        columnDefs: [ {
          targets: -1,
          orderable: false,
          data: null,
          defaultContent: "<button class='btn btn-success'>Edit</button> <button class='btn btn-danger'>Remove</button>"
        } ]
      });
    });

    function showDialog() {
      $('#mymodal').modal();
    }
  </script>
{% endblock scripts %}