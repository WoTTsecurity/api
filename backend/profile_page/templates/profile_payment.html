{% extends "profile_base.html" %}
{% load bootstrap4 %}

{% block profile_content %}
  <div class="card">
    <div class="card-header">
      <h5 class="card-title mb-0">Payment Plan</h5>
    </div>
    <div class="card-body">
      <form method="POST" action="">
        {% csrf_token %}
        {% bootstrap_form form %}
        <input type="hidden" value=1 id="remembered-nodes-number">
        {% buttons %}
          <button type="submit" class="btn btn-primary">Save changes</button>
        {% endbuttons %}
      </form>
    </div>
  </div>
{% endblock %}

{% block scripts %}
  {{ block.super }}
  <script>
      $('#id_payment_plan').change(function () {
          if ($('#id_payment_plan').val() === '2') { // Standard tier.
              $('#id_nodes_number').val($('#remembered-nodes-number').val());
              $('#id_nodes_number').prop("disabled", false);
          } else {
              $('#remembered-nodes-number').val($('#id_nodes_number').val());
              $('#id_nodes_number').val('');
              $('#id_nodes_number').prop("disabled", true);
          }
      });
  </script>
{% endblock %}